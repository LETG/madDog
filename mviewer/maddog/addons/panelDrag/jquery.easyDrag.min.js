/*
jQuery easyDrag v1.3 / 04.2022
par Gildas P. / www.gildasp.fr
infos, tuto, dÃŠmos sur https://lab.gildasp.fr/easydrag/
*/
!function(o){var n,t,d,r,c,l,i,f,u,g=0;function p(a){a.preventDefault(),t=Date.now(),n=o(this),d=n.data("boulet"),r=parseInt(d.css("left")),c=parseInt(d.css("top")),f=n.data("axis"),u=n.data("container"),i="mousedown"==a.type?(l=a.pageX,a.pageY):(a=a.originalEvent.changedTouches[0],l=a.pageX,a.pageY),u.length&&(n.offset().left,n.offset().top),n.data("start").call(d),o(document).on("mousemove.easydrag touchmove.easydrag",s),o(document).on("mouseup.easydrag touchend.easydrag",h),n.data("ontop")&&(g++,d.css("z-index",g))}function s(a){var e,t,s;a.preventDefault(),n.data("drag").call(d),s="mousemove"==a.type?(t=r+a.pageX-l,c+a.pageY-i):(e=a.originalEvent.changedTouches[0],t=r+e.pageX-l,c+e.pageY-i),f&&"x"!=f||d.css({left:t+"px"}),f&&"y"!=f||d.css({top:s+"px"}),u.length&&(a=d.offset(),e=u.offset(),t=e.left,s=t+u.width()-d.innerWidth(),t+=parseInt(d.css("margin-left")),a.left<t?d.offset({left:t}):a.left>s&&d.offset({left:s}),s=(t=e.top)+u.height()-d.innerHeight(),t+=parseInt(d.css("margin-top")),a.top<t?d.offset({top:t}):a.top>s&&d.offset({top:s}))}function h(a){o(document).off("mousemove.easydrag touchmove.easydrag",s),o(document).off("mouseup.easydrag touchend.easydrag",h),n.data("stop").call(d);var e=Date.now()-t;300<e||!n.data("clickable")?(a.preventDefault(),a.stopPropagation()):e<=300&&n.data("clickable")&&"touchend"==a.type&&n.trigger("click")}o.fn.easyDrag=function(s){return"kill"==s?this.each(function(){var a=o(this),e=a.data("handle");e.off("mousedown.easydrag",easyDrag_onMouseDown),e.off("touchstart.easydrag",easyDrag_onTouchStart),e.css("cursor",""),a.removeClass("easydrag_enabled")}):"killall"==s?o(".easydrag_enabled").easyDrag("kill"):(s=o.extend({handle:".handle",axis:!1,container:!1,start:function(){},drag:function(){},stop:function(){},cursor:"move",ontop:!0,clickable:!0},s),this.each(function(){var a,e,t=o(this);t.hasClass("easydrag_enabled")||(a="this"==s.handle||0==t.find(s.handle).length?t:t.find(s.handle),""!=s.cursor&&a.css("cursor",s.cursor),a.data(s),(e=t).addClass("easydrag_enabled"),e.data("handle",a),a.data("boulet",e),"auto"!=t.css("z-index")&&s.ontop&&(g=Math.max(g,t.css("z-index"))),"absolute"!=t.css("position")&&"fixed"!=t.css("position")&&("auto"==t.css("left")&&t.css("left","0"),"auto"==t.css("top")&&t.css("top","0"),t.css("position","relative")),a.on("mousedown.easydrag touchstart.easydrag",p))})),this}}(jQuery);